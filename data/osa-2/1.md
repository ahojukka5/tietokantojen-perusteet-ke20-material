---
path: '/osa-2/1'
title: 'Relaatiomalli'
hidden: false
---

Tietokantojen kehitys ja tutkimus lähtivät vauhtiin 1970-luvulla
ja alalla oli monia yrittäjiä, mutta yksi niistä syrjäytti pian muut:
relaatiomalli, jossa tiedot tallennetaan tauluihin riveinä,
jotka voivat viitata toisiinsa.
Relaatiomallin suosiota siivitti SQL-kieli, jonka avulla voi
kätevästi hakea ja muuttaa tietokannan sisältöä.

## Tietokannan rakenne

Relaatiotietokanta muodostuu _tauluista_ (_table_),
joissa on kiinteät _sarakkeet_ (_column_).
Tauluihin tallennetaan tietoa _riveinä_ (_row_),
joilla on tietyt arvot sarakkeissa.
Jokaisessa taulussa on kokoelma tiettyyn asiaan
liittyvää tietoa.

Seuraavassa kuvassa on esimerkki tietokannasta,
jota voisi käyttää osana verkkokaupan toteutusta.
Tauluissa `Tuotteet`, `Asiakkaat` ja `Ostokset`
on tietoa tuotteista, asiakkaista ja heidän ostoskoriensa sisällöstä.

<img src="/taulut.png">

Tauluissa `Tuotteet` ja `Asiakkaat`
jokaisella rivillä on
yksilöllinen id-numero, jonka avulla niihin voi viitata.
Tämän ansiosta taulussa `Ostokset` voidaan esittää id-numeroiden
avulla, mitä tuotteita kukin asiakas on valinnut.
Tässä esimerkissä Uolevin korissa on porkkana ja selleri
ja Maijan korissa on retiisi, lanttu ja selleri.


## SQL-kieli

_SQL_ (_Structured Query Language_) on vakiintunut tapa
käsitellä relaatiotietokannan sisältöä.
Kielessä on komentoja, joiden avulla voi lisätä,
hakea ja muuttaa tietoa.

SQL-komennot muodostuvat avainsanoista
(kuten `SELECT` ja `WHERE`),
taulujen ja sarakkeiden nimistä sekä muista arvoista.
Esimerkiksi komento

```sql
SELECT hinta FROM Tuotteet WHERE nimi='retiisi';
```

hakee tietokannasta retiisin hinnan.
Komentojen lopussa on puolipiste `;` ja voimme
käyttää vapaasti välilyöntejä ja rivinvaihtoja.
Esimerkiksi voisimme kirjoittaa äskeisen kyselyn myös näin:

```sql
SELECT hinta
FROM Tuotteet
WHERE nimi='retiisi';
```

Tutustumme SQL-komentoihin pikkuhiljaa kurssin aikana.

<text-box variant='hint' name='SQL-kielen tausta'>

SQL-kieli syntyi 1970-luvulla, ja siinä on paljon muistumia
_vanhan ajan ohjelmoinnista_.
Tällaisia piirteitä ovat esimerkiksi:

- Avainsanat ovat kokonaisia englannin kielen sanoja,
  ja komennot muistuttavat englannin kielen lauseita.
- Avainsanoissa kirjainkoolla ei ole väliä. Esimerkiksi
  `SELECT`, `select` ja `Select` tarkoittavat samaa.
  Avainsanat on tapana kirjoittaa kokonaan suurilla kirjaimilla.
- Merkki `=` tarkoittaa sekä asetusta että yhtäsuuruusvertailua
  (nykyään ohjelmoinnissa yhtäsuuruusvertailu on yleensä `==`).

</text-box>


## Tietokantajärjestelmä

_Tietokantajärjestelmä_ (_database management system_)
pitää huolta tietokannan sisällöstä ja toteuttaa tietokannan
käyttäjän antamia komentoja.
Tietokantajärjestelmän vastuulla on,
että tiedon käsittely on tehokasta ja se säilyy oikeellisena.
Nämä ovat merkittäviä haasteita,
jos tiedon määrä voi olla suuri ja sitä käsittelevät
useat samanaikaiset käyttäjät.

Tietokantajärjestelmän ansiosta relaatiotietokannan
käyttäjän riittää kuvailla SQL-kielellä,
mitä tietoja hän haluaa hakea tai muuttaa,
eikä tuntea tietokannan toiminnan yksityiskohtia.
Kun käyttäjä antaa suoritettavaksi SQL-komennon,
tietokantajärjestelmän
tulee etsiä jokin hyvä tapa toteuttaa kyseinen komento.

Vaikka SQL-kielestä on olemassa standardi,
jokainen tietokantajärjestelmä toimii hieman omalla tavallaan.
Tällä kurssilla keskitymme SQL:n ominaisuuksiin,
jotka ovat yleisesti käytettävissä eri tietokannoissa.
Käytämme kurssilla esimerkkinä SQLite-tietokantaa,
joka on yksinkertainen ja sopii SQL-kielen harjoitteluun.

## Muut vaihtoehdot

Relaatiotietokannat ja SQL-kieli ovat olleet valta-asemassa vuosikymmeniä,
mutta viime aikoina niiden rinnalle on noussut vakavasti otettavia haastajia.
Yksi syy tilanteen muutokseen on ollut tarve kehittää tietokantajärjestelmiä,
jotka sopivat paremmin hajautettuun käyttöön kuten suurten nettisivustojen taustalle.

Usein esiintyvä termi _NoSQL_ viittaa tietokantaan,
joka on jotain muuta kuin SQL-kieleen perustuva relaatiotietokanta.
Yksi suosittu NoSQL-tietokanta on MongoDB,
joka säilyttää kokoelmaa JSON-muotoisia dokumentteja.
Vaikka tällä kurssilla keskitymmekin relaatiomalliin,
on hyvä pitää mielessä, että muitakin vaihtoehtoja on tarjolla.
